services: rabbitmq

env:
    global:
      - JRUBY_OPTS=--debug
      - PERL5LIB=$TRAVIS_BUILD_DIR/p5-Cikl/lib:$TRAVIS_BUILD_DIR/p5-Cikl-RabbitMQ/lib

matrix:
  include:
    - language: ruby
      rvm: 1.9.3
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-api/
    - language: ruby
      rvm: 2.0.0
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-api/
    - language: ruby
      rvm: 2.1.0
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-api/
    - language: ruby
      rvm: 1.9.3
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-worker/
    - language: ruby
      rvm: 2.0.0
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-worker/
    - language: ruby
      rvm: 2.1.0
      env: TEST_LANGUAGE=ruby PROJECT_DIR=cikl-worker/
    - language: perl
      perl: 5.14
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl/
    - language: perl
      perl: 5.16
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl/
    - language: perl
      perl: 5.18
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl/
    - language: perl
      perl: 5.14
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl-RabbitMQ/
    - language: perl
      perl: 5.16
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl-RabbitMQ/
    - language: perl
      perl: 5.18
      env: TEST_LANGUAGE=perl PROJECT_DIR=p5-Cikl-RabbitMQ/

before_install:
  - sudo apt-get update -qq
  - travis/$TEST_LANGUAGE/before_install.sh

install: 
  - travis/$TEST_LANGUAGE/install.sh

script:
  - travis/$TEST_LANGUAGE/script.sh
